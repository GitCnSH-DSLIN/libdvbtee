{"name":"Libdvbtee","tagline":"dvbtee: a digital television streamer / parser / service information aggregator supporting various interfaces including telnet CLI & http control","body":"## dvbtee & libdvbtee\r\n\r\n#### Introduction\r\n\r\nlibdvbtee is a stream parser and service information aggregator library for\r\nMPEG2 transport streams. The library includes a program service information\r\n(PSI) parser and support for various network streaming methods and is aware\r\nof the linux-dvb kernel API as well as HDHomeRun network streaming APIs.\r\n\r\nThe library contains enough functionality to power a full featured television\r\nmiddleware application, including the ability to acquire and stream data\r\nthrough UDP, TCP, HTTP, DMA and various other mechanisms.\r\n\r\n`libdvbtee_server` allows for these features to be controlled from an http\r\nsession or command line interface, and can be used to control multiple tuners.\r\n\r\nThe dvbtee executable application provides a variety of features, including:\r\nscanning, tuning, EPG browsing, receive incoming network streams,\r\nstream out network streams, manage multiple tuners, and more...\r\n\r\nThe server can be accessed either by telnet or http. The default port number\r\nis `64080`, but this is configurable. The `server_example` uses port number `62080`.\r\n\r\nWhen accessing the server via http, precede commands by / and arguments by =.\r\nWhen accessing the server via telnet, enter in the form 'command=argument'\r\nand press enter.\r\n\r\nMichael Ira Krufky  \r\nmkrufky at linuxtv dot org\r\n\r\n#### How to build / run\r\nlibdvbtee was originally developed using the qmake build system for easy\r\nmulti-platform build support. libdvbtee still supports the qmake system,\r\nbut now uses autotools as the preferred build system for various reasons.\r\n```\r\nautoreconf --install\r\n./configure\r\nmake\r\ndvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\nIf, for some odd reason, you want to build libdvbtee using the old version of\r\nthe table / descriptor decoder, specify --enable-olddecoder to configure\r\n```\r\nautoreconf --install\r\n./configure --enable-olddecoder\r\nmake\r\ndvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\nIf you prefer to use qmake rather than autotools, use the following commands:\r\n```\r\nqmake -r\r\nmake\r\nLD_LIBRARY_PATH=libdvbtee:libdvbtee_server dvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\nIf, for some odd reason, you want to build libdvbtee using the old version of\r\nthe table / descriptor decoder, specify CONFIG+=olddecoder to qmake\r\n```\r\nqmake -r CONFIG+=olddecoder\r\nmake\r\nLD_LIBRARY_PATH=libdvbtee:libdvbtee_server dvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\nlibdvbtee depends on libdvbpsi for PSIP parsing.\r\nAlthough libdvbtee will build against older libdvbpsi releases,\r\na more recent build is required in order to provide\r\nall of libdvbtee's latest features, such as ATSC support.\r\n\r\nlibdvbtee's build system is capable of building and linking\r\nagainst the latest version of libdvbpsi by placing a copy of the\r\nlibdvbpsi repository in the top level of libdvbtee's source tree.\r\n\r\nRather than giving step-by-step instructions in this README,\r\nshell scripts are provided that will fetch the latest libdvbpsi sources,\r\nconfigure the build system, and build both libraries together.\r\n\r\nFor the integrated build of libdvbtee along with the latest version of libdvbpsi using autotools (recommended):\r\n```\r\n./build-auto.sh\r\ndvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\nFor the integrated build of libdvbtee along with the latest version of libdvbpsi using qmake:\r\n```\r\n./build-qmake.sh\r\nLD_LIBRARY_PATH=libdvbtee:libdvbtee_server dvbtee/dvbtee < mpegfile.ts\r\n```\r\n\r\n#### Command line arguments\r\n```\r\n-a      adapter id\r\n-A      (1 for ATSC, 2 for ClearQAM)\r\n-b      display bitrates & statistics\r\n-c      channel to tune /\r\n        comma (,) separated list of channels to scan /\r\n        scan minimum channel\r\n-C      channel to tune /\r\n        comma (,) separated list of channels to scan /\r\n        scan maximum channel\r\n-f      frontend id\r\n-F      filename to use as input\r\n-t      timeout\r\n-T      number of tuners (dvb adapters) allowed to use, 0 for all\r\n-s      scan, optional arg when using multiple tuners:\r\n        1 for speed, 2 for redundancy,\r\n        3 for speed AND redundancy,\r\n        4 for optimized speed / partial redundancy\r\n-S      server mode, optional arg 1 for command server,\r\n        2 for http stream server, 3 for both\r\n-i      pull local/remote tcp/udp port for data\r\n-I      request a service and its associated PES streams by its service id\r\n-E      enable EPG scan, optional arg to limit the number of EITs to parse\r\n-o      output filtered data, optional arg is a filename / URI, ie udp://127.0.0.1:1234\r\n-O      output options: (or-able) 1 = PAT/PMT, 2 = PES, 4 = PSIP\r\n-H      use a HdHomeRun device, optional arg to specify the device string\r\n-j      enable json output of decoded tables & descriptors\r\n-d      debug level\r\n-h      display additional help\r\n```\r\n#### Example Usage\r\n\r\nTo tune to service id 1 of physical channel 33 and stream it to a udp port:\r\n```\r\n  dvbtee -c33 -I1 -oudp://192.168.1.100:1234\r\n```\r\n\r\nTo tune the second frontend of adapter 1 and stream the full TS of physical channel 44 to a tcp listener:\r\n```\r\n  dvbtee -c44 -otcp://192.168.1.200:5555\r\n```\r\n\r\nTo listen to a TCP port and stream to a UDP port:\r\n```\r\n  dvbtee -itcp://5555 -oudp://192.168.1.100:1234\r\n```\r\n\r\nTo parse a captured file and filter out the PSIP data, saving the PAT/PMT and PES streams to a file:\r\n```\r\n  dvbtee -Finput.ts -O3 -ofile://output.ts\r\n```\r\n\r\nTo parse a UDP stream for ten seconds:\r\n```\r\n  dvbtee -iudp://127.0.0.1:1234 -t10\r\n```\r\n\r\nTo scan for ClearQAM services using 5 tuners optimized for speed and partial redundancy:\r\n```\r\n  dvbtee -A2 -T5 -s4\r\n```\r\n\r\nTo scan for ATSC services using 2 HdHomeRun tuners optimized for speed and redundancy:\r\n```\r\n  dvbtee -A1 -H -T2 -s3\r\n```\r\n\r\nTo start a server using adapter 0:\r\n```\r\n  dvbtee -a0 -S\r\n```\r\n\r\nTo start a server using tuner1 of a specific HdHomeRun device (ex: ABCDABCD):\r\n```\r\n  dvbtee -H ABCDABCD-1 -S\r\n```\r\n\r\n#### Example output:\r\n\r\nTo scan a channel with JSON output enabled, the following command:\r\n```\r\n  dvbtee -s -c13 -j\r\n```\r\n...should generate output similar to the following:\r\n```\r\nscan channel 13...\r\nstore PAT: v0, ts_id: 2011\r\n           3 | 30\r\n           4 | 40\r\n           5 | 50\r\nstore PMT: v12, service_id 3, pcr_pid 49\r\n  es_pid | type\r\n      31 | 0x02 (Video MPEG-2) | \r\n      34 | 0x81 (Audio AC3 (ATSC)) | eng\r\n      35 | 0x81 (Audio AC3 (ATSC)) | spa\r\n      36 | 0x81 (Audio AC3 (ATSC)) | fre\r\nstore VCT: v6, ts_id 2011, b_cable_vct 0\r\n  channel | service_id | source_id | service_name\r\n     13.1 |          3 |         1 | WNET-HD | eng, spa, fre\r\n     13.2 |          4 |         2 | KIDS | eng, spa, fre\r\n     13.3 |          5 |         3 | V-Me | eng\r\nstore MGT: v6\r\n  table type |   pid  | ver | bytes\r\n    0x0000   | 0x1ffb |   6 | 187\r\n    0x0100   | 0x1d00 |   6 | 1103\r\n    0x0101   | 0x1d01 |   6 | 1105\r\n    0x0102   | 0x1d02 |   6 | 1132\r\n    0x0103   | 0x1d03 |   6 | 1305\r\n    0x0200   | 0x1e00 |   6 | 1197\r\n    0x0201   | 0x1e01 |   6 | 1220\r\n    0x0202   | 0x1e02 |   6 | 1157\r\n    0x0203   | 0x1e03 |   6 | 1213\r\nstore PMT: v12, service_id 5, pcr_pid 81\r\n  es_pid | type\r\n      51 | 0x02 (Video MPEG-2) | \r\n      54 | 0x81 (Audio AC3 (ATSC)) | eng\r\nstore PMT: v12, service_id 4, pcr_pid 65\r\n  es_pid | type\r\n      41 | 0x02 (Video MPEG-2) | \r\n      44 | 0x81 (Audio AC3 (ATSC)) | eng\r\n      45 | 0x81 (Audio AC3 (ATSC)) | spa\r\n      46 | 0x81 (Audio AC3 (ATSC)) | fre\r\n\r\n# channel 13, 213000000,  \r\n13.1-WNET-HD:213000000:8VSB:49:52:3\r\n13.2-KIDS:213000000:8VSB:65:68:4\r\n13.3-V-Me:213000000:8VSB:81:84:5\r\nfound 3 services\r\n\r\nTSID#07db: [ { 'programs': [ { 'number': 3, 'pid': 48 }, { 'number': 4, 'pid': 64 }, { 'number': 5, 'pid': 80 } ], 'tableId': 0, 'tableName': 'PAT', 'tsId': 2011, 'version': 0 }, { 'pcrPid': 49, 'program': 3, 'streams': [ { 'pid': 49, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'descriptors': [ { 'bitRateCode': 14, 'bsid': 8, 'bsmod': 0, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'eng', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'eng' } ], 'descriptorTag': 10 } ], 'pid': 52, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'descriptors': [ { 'bitRateCode': 8, 'bsid': 8, 'bsmod': 0, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'spa', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'spa' } ], 'descriptorTag': 10 } ], 'pid': 53, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'descriptors': [ { 'bitRateCode': 8, 'bsid': 8, 'bsmod': 2, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'fre', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'fre' } ], 'descriptorTag': 10 } ], 'pid': 54, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ], 'tableId': 2, 'tableName': 'PMT', 'version': 12 }, { 'channels': [ { 'accessControlled': false, 'carrierFreq': 0, 'descriptors': [ { 'descriptorTag': 161, 'serviceLocation': [ { 'esPid': 49, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'esPid': 52, 'lang': 'eng', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'esPid': 53, 'lang': 'spa', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'esPid': 54, 'lang': 'fre', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ] } ], 'etmLocation': 0, 'hidden': false, 'hideGuide': false, 'major': 13, 'minor': 1, 'modulation': 4, 'outOfBand': true, 'pathSelect': true, 'program': 3, 'serviceName': 'WNET-HD', 'serviceType': 2, 'sourceId': 1, 'tsId': 2011 }, { 'accessControlled': false, 'carrierFreq': 0, 'descriptors': [ { 'descriptorTag': 161, 'serviceLocation': [ { 'esPid': 65, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'esPid': 68, 'lang': 'eng', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'esPid': 69, 'lang': 'spa', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'esPid': 70, 'lang': 'fre', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ] } ], 'etmLocation': 0, 'hidden': false, 'hideGuide': false, 'major': 13, 'minor': 2, 'modulation': 4, 'outOfBand': true, 'pathSelect': true, 'program': 4, 'serviceName': 'KIDS', 'serviceType': 2, 'sourceId': 2, 'tsId': 2011 }, { 'accessControlled': false, 'carrierFreq': 0, 'descriptors': [ { 'descriptorTag': 161, 'serviceLocation': [ { 'esPid': 81, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'esPid': 84, 'lang': 'eng', 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ] } ], 'etmLocation': 0, 'hidden': false, 'hideGuide': false, 'major': 13, 'minor': 3, 'modulation': 4, 'outOfBand': true, 'pathSelect': true, 'program': 5, 'serviceName': 'V-Me', 'serviceType': 2, 'sourceId': 3, 'tsId': 2011 } ], 'isCableVCT': false, 'tableId': 200, 'tableName': 'VCT', 'tsId': 2011, 'version': 6 }, { 'tableId': 199, 'tableName': 'MGT', 'tables': [ { 'bytes': 187, 'pid': 8187, 'type': 0, 'version': 6 }, { 'bytes': 1103, 'pid': 7424, 'type': 256, 'version': 6 }, { 'bytes': 1105, 'pid': 7425, 'type': 257, 'version': 6 }, { 'bytes': 1132, 'pid': 7426, 'type': 258, 'version': 6 }, { 'bytes': 1305, 'pid': 7427, 'type': 259, 'version': 6 }, { 'bytes': 1197, 'pid': 7680, 'type': 512, 'version': 6 }, { 'bytes': 1220, 'pid': 7681, 'type': 513, 'version': 6 }, { 'bytes': 1157, 'pid': 7682, 'type': 514, 'version': 6 }, { 'bytes': 1213, 'pid': 7683, 'type': 515, 'version': 6 } ], 'version': 6 }, { 'pcrPid': 81, 'program': 5, 'streams': [ { 'descriptors': [ { 'CaptionService': [ { 'digital_cc': '708', 'easyReader': false, 'iso639lang': 'eng', 'line21field': true, 'serviceNumber': 1, 'wideAspectRatio': false } ], 'descriptorTag': 134 } ], 'pid': 81, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'descriptors': [ { 'bitRateCode': 10, 'bsid': 8, 'bsmod': 0, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'eng', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'eng' } ], 'descriptorTag': 10 } ], 'pid': 84, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ], 'tableId': 2, 'tableName': 'PMT', 'version': 12 }, { 'pcrPid': 65, 'program': 4, 'streams': [ { 'descriptors': [ { 'CaptionService': [ { 'digital_cc': '708', 'easyReader': false, 'iso639lang': 'eng', 'line21field': true, 'serviceNumber': 1, 'wideAspectRatio': false } ], 'descriptorTag': 134 } ], 'pid': 65, 'streamType': 2, 'streamTypeString': 'Video MPEG-2' }, { 'descriptors': [ { 'bitRateCode': 14, 'bsid': 8, 'bsmod': 0, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'eng', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'eng' } ], 'descriptorTag': 10 } ], 'pid': 68, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'descriptors': [ { 'bitRateCode': 8, 'bsid': 8, 'bsmod': 0, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'spa', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'spa' } ], 'descriptorTag': 10 } ], 'pid': 69, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' }, { 'descriptors': [ { 'bitRateCode': 8, 'bsid': 8, 'bsmod': 2, 'description': '', 'descriptorTag': 129, 'fullSvc': true, 'language': 'fre', 'numChannels': '2/0', 'sampleRate': '48', 'surroundMode': 'Not indicated' }, { 'ISO639Lang': [ { 'audioType': 0, 'language': 'fre' } ], 'descriptorTag': 10 } ], 'pid': 70, 'streamType': 129, 'streamTypeString': 'Audio AC3 (ATSC)' } ], 'tableId': 2, 'tableName': 'PMT', 'version': 12 } ]\r\n```\r\n\r\n#### Server commands\r\n\r\n```\r\ntuner           specify tuner id\r\nfeeder          specify feeder id\r\nscan            scan for services, optional arg comma (,) separated list of channels to scan\r\nscanepg         same as 'scan' with EPG data collection enabled during scan\r\nstartscan       same as 'scan' but asynchronous\r\nstartscanepg    combo of 'scanepg' and 'startscan'\r\ntune            tune to a channel or service, ie:\r\n                tune=33 (full mux) / tune=44~3 (svc id 3)\r\nchannels        list channels\r\nchannel         tune physical channel (unsafe - use tune instead)\r\nservice         select service (unsafe - use tune instead)\r\nstream          add output file / tcp / udp / http stream, ie:\r\n                stream=udp:192.168.1.100:1234\r\n                stream=tcp:192.168.1.200:5555\r\n                stream=file:output.ts\r\n                stream (over http with no arg will begin streaming to current socket)\r\nepg             dump collected EPG data\r\nxmltv           dump collected EPG data in XMLTV format\r\nstop            stop the tuner\r\nstopoutput      stop the tuner and output\r\ncheck           display debug info if debug is enabled\r\ndebug           enable debug\r\nparser          enable / disable the parser for data shovel\r\nlisten          listen for TS on a TCP or UDP port\r\nsave            save scanned channels\r\nquit            stop the server and exit\r\n```","google":"UA-71301363-1","note":"Don't delete this file! It's used internally to help with page regeneration."}